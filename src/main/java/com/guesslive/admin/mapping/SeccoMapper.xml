<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guesslive.admin.dao.SeccoMapper">

	<resultMap id="seccoAccount" type="com.guesslive.admin.model.SeccoAccount">
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="add_point_today" jdbcType="VARCHAR" property="add_point_today"/>
        <result column="before_point" jdbcType="VARCHAR" property="before_point"/>
        <result column="crt_time" jdbcType="VARCHAR" property="crt_time"/>
        <result column="lst_share_date" jdbcType="VARCHAR" property="lst_share_date"/>
        <result column="lst_sign_date" jdbcType="VARCHAR" property="lst_sign_date"/>
        <result column="lst_upt_time" jdbcType="VARCHAR" property="lst_upt_time"/>
        <result column="mobile" jdbcType="VARCHAR" property="mobile"/>
        <result column="point" jdbcType="VARCHAR" property="point"/>
        <result column="status" jdbcType="VARCHAR" property="status"/>
        <result column="exchanged" jdbcType="VARCHAR" property="exchanged"/>
        <result column="exchanged_date" jdbcType="VARCHAR" property="exchanged_date"/>
    </resultMap>

	<resultMap id="statBucks" type="com.guesslive.admin.model.StatBucks">
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="url" jdbcType="VARCHAR" property="url"/>
        <result column="status" jdbcType="VARCHAR" property="status"/>
        <result column="crt_date" jdbcType="VARCHAR" property="crt_date"/>
        <result column="lst_update" jdbcType="VARCHAR" property="lst_update"/>
        <result column="mobile" jdbcType="VARCHAR" property="mobile"/>
    </resultMap>
     
     <select id="getSeccoAccount" resultType="seccoAccount">
		select s.* from secco s where s.mobile = #{mobile,jdbcType=VARCHAR} limit 0,1
     </select>
     
     <select id="getUndealSeccoAccountList" resultType="seccoAccount">
		select s.* from secco s where s.status = 0 and s.lst_upt_time <![CDATA[ < ]]> #{today,jdbcType=VARCHAR} limit #{start,jdbcType=VARCHAR},#{total,jdbcType=VARCHAR} 
     </select>
     
     <select id="addSeccoAccount" parameterType = "com.guesslive.admin.model.SeccoAccount">
		INSERT INTO secco (
			mobile,
			status,
			point,
			lst_upt_time,
			crt_time,
			before_point,
			add_point_today,
			lst_sign_date,
			lst_share_date,
			exchanged,
			exchanged_date
		)
		VALUES
			(
			#{mobile,jdbcType=VARCHAR},
			#{status,jdbcType=VARCHAR},
			#{point,jdbcType=VARCHAR},
			#{lst_upt_time,jdbcType=VARCHAR},
			#{crt_time,jdbcType=VARCHAR},
			#{before_point,jdbcType=VARCHAR},
			#{add_point_today,jdbcType=VARCHAR},
			#{lst_sign_date,jdbcType=VARCHAR},
			#{lst_share_date,jdbcType=VARCHAR},
			#{exchanged,jdbcType=VARCHAR},
			#{exchanged_date,jdbcType=VARCHAR}
		)
     </select>
     
     <select id="updateSeccoAccount" parameterType = "com.guesslive.admin.model.SeccoAccount">
		UPDATE secco
			SET 
			status = #{status,jdbcType=VARCHAR}, 
			point = #{point,jdbcType=VARCHAR}, 
			lst_upt_time = #{lst_upt_time,jdbcType=VARCHAR}, 
			crt_time = #{crt_time,jdbcType=VARCHAR}, 
			before_point = #{before_point,jdbcType=VARCHAR}, 
			add_point_today = #{add_point_today,jdbcType=VARCHAR}, 
			lst_sign_date = #{lst_sign_date,jdbcType=VARCHAR}, 
			lst_share_date = #{lst_share_date,jdbcType=VARCHAR}, 
			exchanged = #{exchanged,jdbcType=VARCHAR}, 
			exchanged_date = #{exchanged_date,jdbcType=VARCHAR}
		WHERE
			mobile = #{mobile,jdbcType=VARCHAR}
     </select>
     
     <select id="addStarBucks" parameterType="com.guesslive.admin.model.StatBucks">
		INSERT INTO starbucks(url, status, crt_date, lst_update, mobile) 
		VALUES 
		( 
			#{url,jdbcType=VARCHAR}, 
			#{status,jdbcType=VARCHAR}, 
			#{crt_date,jdbcType=VARCHAR}, 
			#{lst_update,jdbcType=VARCHAR}, 
			#{mobile,jdbcType=VARCHAR}
		)
     </select>
     
</mapper>